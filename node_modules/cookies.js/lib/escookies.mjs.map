{"version":3,"file":"escookies.mjs","sources":["../src/cookies.coffee","../src/index.coffee"],"sourcesContent":["import objectAssign from 'es-object-assign'\nimport {isNumber}   from 'es-is'\n\n\nclass Cookies\n  contructor: (@defaults = {}) ->\n\n  api: (key, value, attrs) ->\n    return if typeof document == 'undefined'\n\n    # Write\n    if arguments.length > 1\n      attrs = objectAssign path: '/', @defaults, attrs\n\n      if isNumber attrs.expires\n        expires = new Date\n        expires.setMilliseconds expires.getMilliseconds() + attrs.expires * 864e+5\n        attrs.expires = expires\n\n      # We're using \"expires\" because \"max-age\" is not supported by IE\n      attrs.expires = if attrs.expires then attrs.expires.toUTCString() else ''\n\n      try\n        result = JSON.stringify(value)\n        if /^[\\{\\[]/.test(result)\n          value = result\n      catch err\n\n      value = encodeURIComponent(String(value)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent)\n\n      key = encodeURIComponent String key\n      key = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent)\n      key = key.replace(/[\\(\\)]/g, escape)\n\n      strAttrs = ''\n\n      for name, attr of attrs\n        continue unless attr\n        strAttrs += '; ' + name\n        continue if attr == true\n        strAttrs += '=' + attr\n\n      return document.cookie = key + '=' + value + strAttrs\n\n    # Read\n    unless key\n      result = {}\n\n    # To prevent the for loop in the first place assign an empty array\n    # in case there are no cookies at all. Also prevents odd result when\n    # calling \"get()\"\n    cookies = if document.cookie then document.cookie.split('; ') else []\n    rdecode = /(%[0-9A-Z]{2})+/g\n\n    i = 0\n    while i < cookies.length\n      parts  = cookies[i].split '='\n      cookie = parts.slice(1).join '='\n\n      if cookie.charAt(0) == '\"'\n        cookie = cookie.slice 1, -1\n\n      try\n        name = parts[0].replace rdecode, decodeURIComponent\n        cookie = cookie.replace rdecode, decodeURIComponent\n\n        if key == name\n          result = cookie\n          break\n\n        unless key\n          result[name] = cookie\n      catch err\n\n    result\n\n  get: (key) -> @api key\n\n  getJSON: (key) ->\n    try\n      JSON.parse @api key\n    catch err\n      {}\n\n  set: (key, value, attrs) ->\n    @api key, value, attrs\n\n  remove: (key, attrs) ->\n    @api key, '', objectAssign attrs, expires: -1\n\nexport default Cookies\n","import Cookies from './cookies'\nexport default new Cookies()\n"],"names":["Cookies"],"mappings":"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"}